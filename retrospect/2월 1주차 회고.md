# 2월 1주차 회고

### 한 일

- 이미지 업로더 컴포넌트 state 구조 변경
- 이미지 업로더 컴포넌트 로직 분리
- 이미지 편집 기능 완성

### 잘한 점

- 코드를 타이핑 하기 전에 설계를 하는 습관을 만드는 중이다. 로직의 순서를 생각해보고, 인풋과 아웃풋을 꼼꼼하게 확인하고, 어떤 기능을 하는 함수를 만들어야할지 설계한다.
- 처음 설계대로 구현하다가 문제가 발생하면 설계를 다시 점검한다.
- 처음 설계와 최종 구현 코드 사이에 간극을 줄이기 위해 의식적으로 노력해야겠다. 지금으로서는, 라이브러리를 사용하는 경우 라이브러리 문서를 꼼꼼하게 잘 살펴보고, 함수를 세세하게 나누는 것이 도움이 된다고 생각.
- useMyReducer 커스텀 훅을 작성해봤다. dispatch와 reducer, 그리고 functional setState에 대해 이해하는데에 도움이 되었다.
- reducer를 쓰지 않고 로직을 분리하고, 데이터 흐름을 일관된 형태로 만들었다.(useReducer를 사용하는 패턴과 비슷하다.) 기능 추가, 변경, 삭제 등의 변경에도 ‘리액트 컴포넌트’의 수정을 최소한으로 줄일 수 있게 되었다. 더불어 수정할 지점을 파악하기 쉬워졌다.
- 함수형의 컨셉을 일부 적용했다. pipe함수와 map, filter, reduce를 적극 활용했다. 작은 레고 조각들을 조립해서 필요한 모양을 만들어 나간다는 느낌으로 작게 나누려고 노력했다. 함수형 역시 수정 지점을 파악하기 쉬워지는 장점을 느꼈다. 인풋과 아웃풋이 뚜렷해지니 왠지 모르게 수월하게 개발한 기분이다.

### 어려웠던 점, 배운 점

- 코드스플리팅을 적용하면서 모듈에 대해서 조금 더 이해하게 되었다.
- useState와 useReducer를 언제 어떤것을 사용해야하는지 고민을 많이 했다. 나름 내린 결론은, primitive type이라면 useState, 그 외는 useReducer가 낫다는 것. 그리고 한번의 이벤트에 여러개의 state가 변경이 된다면 해당 state는 객체로 묶는 것이 좋다는 것을 느꼈다.
  useState나 useReducer는 어느것을 써도 좋지만 useReducer가 자연스럽게 로직을 분리하기에 좋고, 리액트 컴포넌트를 선언적인 형태로 작성하기에 좋으므로 primitive type의 state가 아니라면 useReducer를 사용하는게 좋을 것 같다는 생각이 들었다. 그리고 useState를 사용한다면 웬만하면 functional setState를 사용해서 로직을 분리하는 것이 좋은듯!
- 리액트와 함께 비동기로직을 다루는 방법에 많이 익숙해졌다. 이제 비동기를 다루는 라이브러리를 적용하더라도 개념이 흔들리지는 않을 것 같다.
- file, blob, dataURL, canvas 등과 많이 친해졌다. 대부분 비동기로 동작하는 기능들이라 머리가 많이 아팠다.
- 이미지 편집 기능을 구현하다보니 다수의 이미지를 추가하는 기능이라 배열 데이터를 다뤘는데, Promise.all()이 익숙하지 않아 많이 헤맸다. 결과적으로는 Promise객체를 더 능숙하게 다룰 수 있게 되었다!
- HTMLImageElement를 생성한 직후에는 width, height 등의 속성을 읽을 수 없다는 사실을 배웠다. 생성 자체는 동기적으로 이루어지지만 loading은 비동기로 이루어지기 때문에 onload함수를 활용해서 비동기로 처리해야한다는 점을 배웠다.
- 외부에서 가져온 이미지를 편집하는 경우에 cross origin 문제가 발생한다는 점을 배웠다. imageElement.crossOrigin 속성을 ‘Anonymous’로 설정하는 것으로 해결할 수 있었다.

### 개선할 점

- 비동기 로직을 react hook으로부터 완전히 분리하는 방법을 고민해야겠다. 현재 상태로는 테스트 코드를 작성하는게 번거로울 것 같다.

### 다음주 계획

- 프로젝트 이런저런 버그 수정 + 반응형 적용
- 서버사이드 렌더링 학습
